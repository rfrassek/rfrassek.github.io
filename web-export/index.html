<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>p5.js Draggable Images with Border and Text</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>
  <script>
    let imgX, imgY;
    let img, bg;
    let offsetX, offsetY;
    let dragging = false;

    function preload() {
      bg = loadImage('pro1.png', 
                     () => console.log('Background image loaded successfully'), 
                     err => console.error('Error loading background image', err));
      img = loadImage('pro2.png', 
                      () => console.log('Draggable image loaded successfully'), 
                      err => console.error('Error loading draggable image', err));
    }

    function setup() {
      createCanvas(1257, 593);
      if (!bg || !img) {
        console.error('Images not loaded properly');
        noLoop(); // Stop draw loop if images are not loaded
        return;
      }
      centerImage();
    }

    function draw() {
      if (!bg || !img) return; // Don't proceed if images are not loaded
      background(255); // White background

      // Draw background image with border
      stroke(0); // Black border
      strokeWeight(2); // Border thickness
      image(bg, 2, 2, width - 4, height - 4); // Leave space for border
      
      // Draw draggable image
      if (dragging) {
        imgX = mouseX - offsetX;
        imgY = mouseY - offsetY;
      }
      image(img, imgX, imgY);

      // Draw text sentence
      noStroke();
      fill(0);
      textSize(24);
      textAlign(CENTER, CENTER);
      text("Move the red line up to check Yangian invariance!", width / 2, 30);
    }

    function mousePressed() {
      if (mouseX > imgX && mouseX < imgX + img.width && mouseY > imgY && mouseY < imgY + img.height) {
        dragging = true;
        offsetX = mouseX - imgX;
        offsetY = mouseY - imgY;
      }
    }

    function mouseReleased() {
      dragging = false;
    }

    function keyPressed() {
      centerImage();
    }

    function centerImage() {
      imgX = 30;
      imgY = 480;
    }
  </script>
</body>
</html> 
